Version 4
SHEET 1 2452 1580
WIRE -384 -192 -416 -192
WIRE -96 -192 -384 -192
WIRE 1264 -192 -96 -192
WIRE -96 -144 -96 -192
WIRE -192 -64 -224 -64
WIRE -144 -64 -192 -64
WIRE -416 16 -416 -192
WIRE -192 80 -224 80
WIRE -96 80 -96 -48
WIRE -96 80 -192 80
WIRE -16 80 -96 80
WIRE 176 80 16 80
WIRE 304 80 256 80
WIRE 448 80 384 80
WIRE 544 80 448 80
WIRE 576 80 544 80
WIRE 688 80 576 80
WIRE 912 80 688 80
WIRE 688 112 688 80
WIRE 1264 128 1264 -192
WIRE 448 144 448 80
WIRE 0 176 0 96
WIRE 48 176 0 176
WIRE 176 176 48 176
WIRE 576 176 576 80
WIRE -96 192 -96 80
WIRE 448 240 448 208
WIRE 688 240 688 192
WIRE 784 288 736 288
WIRE 1264 320 1264 208
WIRE 1264 320 1088 320
WIRE 1360 320 1264 320
WIRE 1424 320 1360 320
WIRE 1088 352 1088 320
WIRE -416 368 -416 96
WIRE -96 368 -96 256
WIRE -96 368 -416 368
WIRE 448 368 448 320
WIRE 448 368 -96 368
WIRE 576 368 576 256
WIRE 576 368 448 368
WIRE 688 368 688 336
WIRE 688 368 576 368
WIRE -416 416 -416 368
WIRE 1088 448 1088 416
WIRE 48 512 -16 512
WIRE 96 512 48 512
WIRE 400 512 304 512
WIRE 432 512 400 512
WIRE 1264 528 1264 320
WIRE 96 544 -160 544
WIRE 400 544 304 544
WIRE 432 544 400 544
WIRE 96 576 64 576
WIRE 400 576 304 576
WIRE 432 576 400 576
WIRE 912 576 912 80
WIRE 960 576 912 576
WIRE 1088 576 1088 528
WIRE 1088 576 1040 576
WIRE 1168 576 1088 576
WIRE 1216 576 1168 576
WIRE 64 608 64 576
WIRE 96 608 64 608
WIRE 400 608 304 608
WIRE 432 608 400 608
WIRE 1088 624 1088 576
WIRE 1088 768 1088 704
WIRE 1264 768 1264 624
WIRE -160 928 -160 544
WIRE 1424 928 1424 320
WIRE 1424 928 -160 928
FLAG -416 416 0
FLAG 544 80 out
FLAG -384 -192 dc
FLAG 48 176 isense
FLAG 400 576 gate
FLAG 400 608 source
FLAG -192 -64 gate
FLAG -192 80 source
FLAG 48 512 isense
FLAG 400 512 isensa
FLAG 400 544 clk
FLAG 1264 768 0
FLAG 1360 320 comp
FLAG 1168 576 ref
FLAG 1088 768 0
SYMBOL ind 288 96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 100µ
SYMBOL cap 432 144 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res 560 160 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL voltage -416 0 R0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL res 272 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 50m
SYMBOL res 432 224 R0
SYMATTR InstName R3
SYMATTR Value 200m
SYMBOL Control\\isense 0 80 R0
WINDOW 0 0 -28 Bottom 2
WINDOW 3 39 36 Bottom 2
SYMATTR InstName U4
SYMATTR Value k=5
SYMBOL nmos -144 -144 R0
SYMATTR InstName M1
SYMATTR Value IRF530
SYMBOL Control\\idiode -80 256 R180
WINDOW 3 24 -28 Left 2
WINDOW 123 24 -56 Left 2
SYMATTR InstName U1
SYMBOL MyCMC 176 608 R0
WINDOW 3 -79 36 Left 2
WINDOW 123 -77 60 Left 2
WINDOW 39 -79 86 Left 2
SYMATTR Value2 ma={5*2.5e4}
SYMATTR InstName U2
SYMBOL res 1072 432 R0
SYMATTR InstName R7
SYMATTR Value 16k
SYMBOL res 1056 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 16k
SYMBOL MyTL431 1264 576 R0
SYMATTR InstName U3
SYMBOL cap 1072 352 R0
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL res 1248 112 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 1072 608 R0
SYMATTR InstName R6
SYMATTR Value 16k
SYMBOL res 672 96 R0
SYMATTR InstName R5
SYMATTR Value 10
SYMBOL Control\\switch 688 288 M0
SYMATTR InstName U5
SYMBOL Control\\step 816 288 M0
WINDOW 3 -5 68 Bottom 2
WINDOW 123 15 103 Bottom 2
SYMATTR Value2 td=1m SR=1e8
SYMATTR InstName U6
TEXT 72 -56 Left 2 !.tran 0 2.2m 0 0.1u uic
TEXT 80 -96 Left 2 !.options reltol=1m
TEXT 72 424 Left 2 ;Current-Mode Controller
